import{C as p,a as s,b as a,bb as g,d as h,db as b,e as m,i as u,l as f,ob as d,z as l}from"./chunk-YKZVNGVC.js";var o={production:!0,apiUrl:"http://localhost:4000"};var j=class r{constructor(t,e){this.router=t;this.http=e;this.userSubject=new m(JSON.parse(localStorage.getItem("user"))),this.user=this.userSubject.asObservable()}userSubject;user;get userValue(){return this.userSubject.value}callFakeRestApi(){return this.http.get("https://jsonplaceholder.typicode.com/posts/1/comments")}getAllUsers(){return this.http.get("https://jsonplaceholder.typicode.com/users/")}getPostById(t){return this.http.get(`https://dummyjson.com/posts/${t}`)}getDateTimeAsync(t){let e=new g().set("offsetDateTime",t);return this.http.get("http://localhost:8080/offset",{params:e})}login(t,e){return this.http.post(`${o.apiUrl}/users/authenticate`,{username:t,password:e}).pipe(u(n=>(localStorage.setItem("user",JSON.stringify(n)),this.userSubject.next(n),n)))}logout(){localStorage.removeItem("user"),this.userSubject.next(null),this.router.navigate(["/account/login"])}register(t){return this.http.post(`${o.apiUrl}/users/register`,t)}getAll(){return this.http.get(`${o.apiUrl}/users`)}getById(t){return this.http.get(`${o.apiUrl}/users/${t}`)}update(t,e){return this.http.put(`${o.apiUrl}/users/${t}`,e).pipe(u(n=>{if(t==this.userValue?.id){let c=s(s({},this.userValue),e);localStorage.setItem("user",JSON.stringify(c)),this.userSubject.next(c)}return n}))}delete(t){return this.http.delete(`${o.apiUrl}/users/${t}`).pipe(u(e=>(t==this.userValue?.id&&this.logout(),e)))}static \u0275fac=function(e){return new(e||r)(p(d),p(b))};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};var i=class{id;type;message;autoClose;keepAfterRouteChange;fade;constructor(t){Object.assign(this,t)}};var v=class r{subject=new h;defaultId="default-alert";onAlert(t=this.defaultId){return this.subject.asObservable().pipe(f(e=>e&&e.id===t))}success(t,e){this.alert(new i(a(s({},e),{type:0,message:t})))}error(t,e){this.alert(new i(a(s({},e),{type:1,message:t})))}info(t,e){this.alert(new i(a(s({},e),{type:2,message:t})))}warn(t,e){this.alert(new i(a(s({},e),{type:3,message:t})))}alert(t){t.id=t.id||this.defaultId,this.subject.next(t)}clear(t=this.defaultId){this.subject.next(new i({id:t}))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};export{o as a,j as b,v as c};
